{
    // 模版描述；
    "Description":"Deploy hybrid pool cluster",
    // 此模块主要定义参数；
    "Parameters":{
        // 集群主节点的api地址;
        "ClusterURL":{
            "Type":"String",
            "Value":"http://10.10.21.51:8056/v1"
        },
        // 定义添加节点ip<10.10.21.52/53>;
        "AdminIPs_1":{
            "Type":"StringList",
            "Value":[
                "10.10.21.52",
                "10.10.21.53"
            ]
        },
        // 定义添加节点的角色；
        "Roles_1":{
            "Type":"StringList",
            "Value":[
                "admin",
                "monitor",
                "block_storage_gateway"
            ]
        }
    },
    // 以下为需要创建的资源；
    "Resources":[
        {
        // 使用集群UI用户名密码，创建token用于以下部署(或者使用“-t”指定集群已有的token)；
            "Name":"token",
            "Type":"Token",
            "Properties":{
                "Name":"admin",
                "Password":"admin"
            }
        },
        {
        // 添加节点，等待120s后，间隔60秒检查一次资源是否创建成功（如没有定义默认间隔30s，检查30次）；
            "Name":"Hosts_vol",
            "Type":"Hosts",
            "CheckInterval":120,
            "WaitInterval":60,
            "Properties":{
                "AdminIPs":{
                    "Ref":"AdminIPs_1"
                },
                "Roles":{
                    "Ref":"Roles_1"
                }
            },
            "Sleep":10
        },
        {
        // 在hostid为“1”的节点，取“vdb” HDD，（hostid可以使用"xms-cli --user <UIUSER> --password <UIPASSWD> host list"进行查询）；
        // 默认hostid进行顺延，例如，第一台部署的节点id为1，添加2台的id为2和3，以此类推；
            "Name":"Host1_HDDModify",
            "Type":"DiskList",
            "Properties":{
                "Used":false,
                "DiskType":"HDD",
                "Device":"vdb",
                "HostiDs":[
                    1
                ]
            }
        },
        {
        // 此处为上一步取的”HDD，将其更新为“SSD”（注意此处名称与上一步一致）；
            "Name":"Host1_HDDModify",
            "Type":"DiskList",
            "Action":"Update",
            "Properties":{
                "DiskType":"SSD",
                "HostiDs":[
                    1
                ]
            }
        },
        {
        // 获取hostid为“1”的节点上面的一块未使用的“SSD”（磁盘是否为“HDD”或者“SSD”，可以使用"lsblk -d -o NAME,ROTA",其中为“0”的表示“SSD”，为“1”的表示“HDD”）；
            "Name":"Host1_SSDDiskList",
            "Type":"DiskList",
            "Properties":{
                "Used":false,
                "DiskType":"SSD",
                "HostiDs":[
                    1
                ]
            }
        },
        {
        // 此处引用上一步获取到的“SSD”硬盘，将其分区（默认磁盘的分区大小为“30-250G”，需要根据硬盘的大小选择合理的分区个数，否则会无法分配）；
            "Name":"Host1_Partitions",
            "Type":"Partitions",
            "Properties":{
                "DiskIDs":{
                    "Ref":"Host1_SSDDiskList"
                },
                "NumPerDisk":3
            }
        },
        {
        // 获取hostid为“1”的节点上面的一块未使用的“HDD”；
            "Name":"Host1_HDDDiskList",
            "Type":"DiskList",
            "Properties":{
                "Used":false,
                "DiskType":"HDD",
                "Num":1,
                "HostiDs":[
                    1
                ]
            }
        },
        {
        // 通过以上获取的资源创建混合模式的类型为数据盘的osd（对象索引中还有一种类型的索引盘，根据实际需要进行创建）；
            "Name":"Host1_Hybirdosd",
            "Type":"Osds",
            "Properties":{
                "PartitionIDs":{
                    "Ref":"Host1_Partitions"
                },
                "DiskIDs":{
                    "Ref":"Host1_HDDDiskList"
                },
                "Role":"data"
            }
        },
        {
        // 同Host1节点修改“HDD”为“SSD”一致；
            "Name":"Host2_HDDModify",
            "Type":"DiskList",
            "Properties":{
                "Used":false,
                "DiskType":"HDD",
                "Device":"vdb",
                "HostiDs":[
                    7
                ]
            }
        },
        {
        // 同Host1节点修改“HDD”为“SSD”一致；
            "Name":"Host2_HDDModify",
            "Type":"DiskList",
            "Action":"Update",
            "Properties":{
                "DiskType":"SSD",
                "HostiDs":[
                    7
                ]
            }
        },
        {
        // 同Host1节点获取“SSD”一致；
            "Name":"Host2_SSDDiskList",
            "Type":"DiskList",
            "Properties":{
                "Used":false,
                "DiskType":"SSD",
                "HostiDs":[
                    7
                ]
            }
        },
        {
        // 同Host1节点“SSD”分区一致；
            "Name":"Host2_Partitions",
            "Type":"Partitions",
            "Properties":{
                "DiskIDs":{
                    "Ref":"Host2_SSDDiskList"
                },
                "NumPerDisk":3
            }
        },
        {
        // 同Host1节点获取“HDD”一致；
            "Name":"Host2_HDDDiskList",
            "Type":"DiskList",
            "Properties":{
                "Used":false,
                "DiskType":"HDD",
                "Num":1,
                "HostiDs":[
                    7
                ]
            }
        },
        {
        // 同Host1节点创建osd一致；
            "Name":"Host2_Hybirdosd",
            "Type":"Osds",
            "Properties":{
                "PartitionIDs":{
                    "Ref":"Host2_Partitions"
                },
                "DiskIDs":{
                    "Ref":"Host2_HDDDiskList"
                },
                "Role":"data"
            }
        },
        {
        // 参考Host1解释；
            "Name":"Host3_HDDModify",
            "Type":"DiskList",
            "Properties":{
                "Used":false,
                "DiskType":"HDD",
                "Device":"vdb",
                "HostiDs":[
                    8
                ]
            }
        },
        {
        // 参考Host1解释；
            "Name":"Host3_HDDModify",
            "Type":"DiskList",
            "Action":"Update",
            "Properties":{
                "DiskType":"SSD",
                "HostiDs":[
                    8
                ]
            }
        },
        {
        // 参考Host1解释；
            "Name":"Host3_SSDDiskList",
            "Type":"DiskList",
            "Properties":{
                "Used":false,
                "DiskType":"SSD",
                "HostiDs":[
                    8
                ]
            }
        },
        {
        // 参考Host1解释；
            "Name":"Host3_Partitions",
            "Type":"Partitions",
            "Properties":{
                "DiskIDs":{
                    "Ref":"Host3_SSDDiskList"
                },
                "NumPerDisk":3
            }
        },
        {
        // 参考Host1解释；
            "Name":"Host3_HDDDiskList",
            "Type":"DiskList",
            "Properties":{
                "Used":false,
                "DiskType":"HDD",
                "Num":1,
                "HostiDs":[
                    8
                ]
            }
        },
        {
        // 参考Host1解释；
            "Name":"Host3_Hybirdosd",
            "Type":"Osds",
            "Properties":{
                "PartitionIDs":{
                    "Ref":"Host3_Partitions"
                },
                "DiskIDs":{
                    "Ref":"Host3_HDDDiskList"
                },
                "Role":"data"
            }
        },
        {
        // 此处将以上资源汇集成列表，声明数据类型，便于后面引用；
            "Name":"Hybrid_HybirdDiskList_Pool",
            "Type":"IntegerList",
            "Properties":{
                "Attributes":[
                    {
                        "Ref":"Host1_Hybirdosd"
                    },
                    {
                        "Ref":"Host2_Hybirdosd"
                    },
                    {
                        "Ref":"Host3_Hybirdosd"
                    }
                ]
            }
        },
        {
        // 将以上创建的资源创建混合类型的3副本的存储池；
            "Name":"HybirdPool",
            "Type":"Pool",
            "Properties":{
                "name":"HybirdPool",
                "ProtectionDomainID":1,
                "PoolType":"replicated",
                "OsdIDs":{
                    "Ref":"Hybrid_HybirdDiskList_Pool"
                },
                "Size":3
            }
        }
    ]
}
